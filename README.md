# 🎮 VanSurv - Vampire Survivors Clone

**VanSurv**は、大人気ゲーム「Vampire Survivors」風のサバイバルアクションゲームです。Pythonとpygameで開発された、シンプルながら中毒性の高いゲーム体験をお楽しみください。

![VanSurv Screenshot](assets/screenshot.png)

## 🌟 特徴

- 🎯 **シンプルな操作**: マウス移動とキーボード選択のみ
- ⚔️ **多彩な武器システム**: 9種類の個性的な武器から初期選択可能
- 🎮 **3x3武器選択UI**: ゲーム開始時に全武器から自由に初期武器を選択
- 💎 **成長要素**: 経験値とレベルアップによる強化
- 🔮 **サブアイテム**: 8種類のパッシブ効果でキャラクターを強化
- 💥 **特殊アイテム**: 回復・爆弾・マグネットの3種類
- 🗺️ **レトロマップシステム**: タイル式ステージと障害物システム
- 🎨 **視覚エフェクト**: 豊富なパーティクルエフェクトと画面演出
- 📊 **ミニマップ**: プレイヤー・敵・アイテムの位置を表示
- 🏆 **3分間サバイバル**: 制限時間内での生存が目標
- 🖥️ **ウィンドウリサイズ対応**: 画面サイズに応じた仮想解像度スケーリング

## 🎮 ゲームルール

### 基本ルール
- **目標**: 3分間（180秒）生存してクリア
- **初期武器選択**: ゲーム開始時に9種類の武器から1つを選択（3x3グリッドUI）
- **操作**: マウス移動でプレイヤーを操作
- **攻撃**: 武器は自動攻撃（プレイヤー操作不要）
- **成長**: 敵を倒して経験値を獲得、レベルアップで強化
- **ステージ**: レトロなタイル式マップと障害物（岩・木）システム

### 生存のコツ
1. **初期武器を戦略的に選択**（近接・遠距離・範囲攻撃など）
2. **障害物を利用して敵の動きを制御**
3. **敵を避けながら経験値を集める**
4. **レベルアップ時に戦略的な武器・サブアイテムを選択**
5. **回復アイテムを積極的に取得**
6. **マグネットで経験値を効率収集**
7. **爆弾で危機を脱出**

## ⚔️ 武器システム

**ゲーム開始時**: 9種類の武器から3x3グリッドUIで初期武器を自由選択可能

### 近接武器
| 武器 | 効果 | 特徴 |
|------|------|------|
| **🗡️ Whip（ムチ）** | 横方向に高速攻撃 | 連続攻撃が得意 |
| **🧄 Garlic（ガーリック）** | 周囲360°攻撃 + HP回復 | 攻撃時に1HP回復する防御型 |
| **⚔️ Sword（ソード）** | 近接攻撃で高ダメージ | 攻撃力が高く安定したダメージ |

### 投射武器
| 武器 | 効果 | 特徴 |
|------|------|------|
| **🪄 Magic Wand（魔法の杖）** | 最寄りの敵に誘導弾 | 確実にヒットする |
| **🌊 Holy Water（聖水）** | 投射＋着弾地点に持続ダメージ | 範囲制圧が可能 |
| **🪓 Axe（アックス）** | 放物線軌道の高威力攻撃 | 一撃が重い |
| **🪨 Stone（ストーン）** | 直線貫通攻撃 | 複数の敵を同時攻撃 |
| **📖 Rotating Book（魔法の本）** | プレイヤー周囲を回転 | 安定した防御 |
| **🔪 Knife（ナイフ）** | 高速直線攻撃 | 攻撃頻度が高い |
| **⚡ Thunder（サンダー）** | ランダム位置に落雷 | 高威力の範囲攻撃 |

## 🗺️ ステージ・マップシステム

### レトロマップ機能
- **タイル式ステージ**: 64x64のタイルで構成されたレトロな背景
- **障害物システム**: 岩・木などの障害物がプレイヤーと敵の移動を制限
- **安全スポーン**: プレイヤーの初期位置は移動可能エリアを自動選択
- **戦略性向上**: 障害物を利用した敵の誘導と回避が可能

### マップ切替
- **USE_STAGE_MAP**: `constants.py`で設定可能
  - `True`: レトロマップ（デフォルト）
  - `False`: テスト用市松模様背景

### デバッグ機能
- **F5キー**: 障害物の当たり判定を可視化（デバッグ用）

## 🔮 サブアイテムシステム

プレイヤーの基本能力を永続的に強化するパッシブアイテム：

| アイテム | 効果 | レベル効果 |
|----------|------|-----------|
| **❤️ HP** | 最大HP増加 + 自然回復強化 | Lv1: +20HP, Lv2: +40HP, Lv3: +60HP |
| **⚔️ Base Damage** | 全武器の基礎ダメージ増加 | Lv1: +15%, Lv2: +30%, Lv3: +50% |
| **🛡️ Defense** | 被ダメージ軽減 | Lv1: -1, Lv2: -2, Lv3: -3 |
| **💨 Speed** | 移動速度向上 + 回避率 | Lv1: +20% + 5%回避, Lv2: +40% + 10%回避, Lv3: +70% + 15%回避 |
| **📏 Effect Range** | 武器の効果範囲拡大 | Lv1: +20%, Lv2: +40%, Lv3: +70% |
| **⏱️ Effect Time** | 武器の持続時間延長 | Lv1: +30%, Lv2: +60%, Lv3: +100% |
| **🎯 Extra Projectiles** | 投射武器の弾数増加 | Lv1: +1発, Lv2: +2発, Lv3: +3発 |
| **🚀 Projectile Speed** | 投射武器の速度＋経験値収集範囲 | Lv1: +30%速度 +20px収集, Lv2: +60%速度 +40px収集, Lv3: +100%速度 +70px収集 |

### サブアイテムの特殊効果
- **HP**: 2秒毎に自然回復（レベル分のHP回復）
- **Speed**: 被ダメージ時に確率で完全回避
- **Projectile Speed**: 経験値ジェムの収集範囲拡大

## �️ ステージ・マップシステム

### レトロマップ機能
- **タイル式ステージ**: 64x64のタイルで構成されたレトロな背景
- **障害物システム**: 岩・木などの障害物がプレイヤーと敵の移動を制限
- **安全スポーン**: プレイヤーの初期位置は移動可能エリアを自動選択
- **戦略性向上**: 障害物を利用した敵の誘導と回避が可能

### マップ切替
- **USE_STAGE_MAP**: `constants.py`で設定可能
  - `True`: レトロマップ（デフォルト）
  - `False`: テスト用市松模様背景

### デバッグ機能
- **F5キー**: 障害物の当たり判定を可視化（デバッグ用）

## �💎 特殊アイテム

敵を倒すとドロップする特殊効果アイテム：

### 🩹 Heal Item（回復アイテム）
- **効果**: 最大HPの20%を即座に回復
- **ドロップ率**: 0.5%
- **視覚効果**: 緑色の十字マーク + 回復エフェクト

### 💣 Bomb Item（爆弾アイテム）
- **効果**: 画面上の全ての敵を一掃
- **ドロップ率**: 0.2%
- **視覚効果**: 画面揺れ + 大量の経験値ジェム生成

### 🧲 Magnet Item（マグネットアイテム）
- **効果**: 3秒間、全ての経験値ジェムを高速吸引
- **ドロップ率**: 0.1%（レア）
- **視覚効果**: 磁石アイコン + 全方向からのジェム吸引

## 🎯 操作方法

### 基本操作
- **マウス移動**: プレイヤー移動
- **武器攻撃**: 自動実行

### 初期武器選択（ゲーム開始時）
- **矢印キー / WASD**: グリッド内の選択移動
- **1-9数字キー**: 直接武器選択
- **Enter / Space**: 武器決定
- **マウスクリック**: 武器を直接選択

### レベルアップ選択
- **←→ / A・D**: 選択肢の移動
- **Enter / Space**: 決定
- **マウスクリック**: 直接選択

### デバッグ・設定
- **F3**: デバッグモード切替
- **F4**: プレイヤーステータス表示切替
- **F5**: 攻撃範囲の可視化切替
- **F11**: フルスクリーン切替（無効化済み）

### ゲーム終了時
- **Enter**: リスタート
- **Continue**: HPを全回復して継続（ゲームオーバー時）
- **Continue**: 時間をリセットして継続（ゲームクリア時）

## 🛠️ 技術仕様

- **言語**: Python 3.8+
- **ライブラリ**: pygame 2.0+
- **解像度**: 1280x720（仮想解像度）
- **画面対応**: リサイズ可能、アスペクト比保持スケーリング
- **FPS**: 60
- **ワールドサイズ**: 5120x2880（画面の4倍）
- **アーキテクチャ**: モジュラー設計（武器・エフェクト・UI・ステージ分離）

## 📦 インストール・実行

### 開発環境での実行
```bash
# 必要パッケージのインストール
pip install pygame

# ゲーム実行
python main.py
```

### 実行ファイル作成

#### Windows
```bash
# 開発環境セットアップ
setup_dev.bat

# 実行ファイル作成
create_exe.bat
```

#### macOS/Linux
```bash
# 権限設定（初回のみ）
chmod +x setup_permissions.sh
./setup_permissions.sh

# 実行ファイル作成
./create_app.sh
```

詳細は [Windows版ビルドガイド](BUILD_WIN.md) / [Mac版ビルドガイド](BUILD_MAC.md) を参照してください。

## 🎮 ゲームプレイのコツ

### 初心者向け
1. **初期武器選択を慎重に**: 近接（Whip, Garlic）、遠距離（Magic Wand, Stone）から好みに応じて選択
2. **HPサブアイテムで生存力を上げる**
3. **回復アイテムは優先的に取得**
4. **障害物を盾として活用**
5. **敵の集団に突っ込まず、距離を保つ**

### 上級者向け
1. **武器の組み合わせでシナジー効果を狙う**
2. **投射武器 + Extra Projectiles で弾幕を作る**
3. **Effect Range + Effect Time で制圧範囲を拡大**
4. **Speedサブアイテムで回避特化ビルド**
5. **障害物を利用した敵の誘導テクニック**

## 🔄 アップデート履歴

### v1.2.0（最新）
- **初期武器選択システム**: 3x3グリッドUIですべての武器から選択可能
- **レトロマップシステム**: タイル式ステージと障害物システム
- **ウィンドウリサイズ対応**: アスペクト比保持の仮想解像度スケーリング
- **ミニマップ機能**: プレイヤー・敵・アイテム位置表示
- **UI統一**: 初期武器選択とレベルアップ画面のデザイン統一
- **デバッグ機能強化**: F5キーで障害物可視化
- **安全スポーン**: 移動可能エリアでのプレイヤー開始位置自動選択

### v1.1.0
- **武器追加**: Sword（ソード）を追加し計9種類の武器
- **日本語対応**: 武器名・説明文の日本語化
- **説明システム**: data/descriptions.jsonによる武器・アイテム説明管理

### v1.0.0
- 基本ゲームシステム実装
- 8種類の武器システム
- 8種類のサブアイテムシステム
- 3種類の特殊アイテム（回復・爆弾・マグネット）
- 画面揺れエフェクト（爆弾アイテム）
- HPサブアイテムによる自然回復システム

## 🤝 コントリビューション

バグ報告、機能要望、コードの改善提案などは大歓迎です！

1. このリポジトリをフォーク
2. 新しいブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを開く

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細は [LICENSE](LICENSE) ファイルを参照してください。

## 🙏 謝辞

- **Vampire Survivors** - オリジナルゲームのインスピレーション
- **pygame community** - 優れたゲーム開発ライブラリ

---

**🎮 今すぐダウンロードして、3分間のサバイバルに挑戦しよう！**
